#!/usr/bin/env bash
# bin/compile BUILD_DIR CACHE_DIR ENV_DIR

set -eo pipefail

# Debug
set -x

BUILD_DIR=$1
CACHE_DIR=$2
ENV_DIR=$3

BUILDPACK_DIR=$(cd "$(dirname "$0")"; cd ..; pwd)

# Load formating tools
source "$BUILDPACK_DIR/bin/common.sh"


# Install runner
# See https://github.com/actions/runner/releases
topic "Installing Github runner"
mkdir $BUILD_DIR/actions-runner && cd $BUILD_DIR/actions-runner
curl -O -L https://github.com/actions/runner/releases/download/v2.285.1/actions-runner-linux-arm-2.285.1.tar.gz | indent
tar xzf ./actions-runner-linux-arm-2.285.1.tar.gz | indent


# PROFILE_PATH="$BUILD_DIR/.profile.d/jq.sh"
# mkdir -p $(dirname $PROFILE_PATH)

# function set-default-env (){
#   echo "export $1=\$$1:/app/vendor/jq/$2" >> $PROFILE_PATH
# }

# set-default-env LD_LIBRARY_PATH "lib"
# set-default-env PATH "bin"
